<html>
<head>
    //A jelszó hossza max 45 lehet!!!
    <meta charset="UTF-8">
    <title>Terminus - Könnyen, gyorsan</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script> 

    <script>
        function ValidateEmail(uemail)
        {
          var mailformat = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;  
          if(uemail.value.match(mailformat)){
              return true
          }
          else
          {
              alert("Helytelen email címet adott meg!");
              uemail.focus();
              return false;
          }
        }
        function passid_validation(passid,mx,my)
        {
            var passid_len = passid.value.length;
            if(passid_len === 0 ){
                alert("A jelszó nem lehet üres!");
                passid.focus();
                return false;
            }
            else if(passid_len >= my || passid_len < mx){
                alert("A jelszónak legalább"+mx+" hosszúnak kell lennie");
                passid.focus();
                return false;
            }
            return true;
        }
        function passid_match(pass1, pass2){
            if(pass1 !== pass2){
                alert("A két jelszó nem egyezik meg!");
                return false;
            }
            return true;
        }
        function onlyNumbers(uszam){
            var numbers = /^[0-9]*$/;
            if(uszam.value.match(numbers)){
                return true;
            }
            else{
                alert("Csakis telefonszámot írjon be!");
                uszam.focus();
                return false;
            }
        }
        function ZIPValidate(uirsz){
            var numbers = /^[0-9]*$/;
            var length = 4;
            if(uirsz.value.match(numbers) && uirsz.value.length === length){
                return true;
            }
            else{
                alert("Helytelen irányítószámot adott meg!");
                uszam.focus();
                return false;
            }
        }
        function NameValidation(uvezetek, ukereszt){
            var letters = /^[a-zA-Z]+$/;
            if(uvezetek.value.match(letters) && ukereszt.value.match(letters)){
                return true;
            }
            else
            {
                alert("A vezetéknév és keresztnév nem tartalmazhat számokat illetve különleges karaktereket!");
                uvezetek.focus();
                return false;
            }
        }
        function formValidation()
        {
        var uemail = document.getElementById("email");
        var passid_1 = document.getElementById("password_1");
        var passid_2 = document.getElementById("password_2");
        var uvezeteknev = document.getElementById("vezeteknev");
        var ukeresztnev = document.getElementById("keresztnev");
        var utelefon = document.getElementById("telefonszam");
        var uirsz = document.getElementById("irsz");
        var uvaros = document.getElementById("varos");
        var uutca = document.getElementById("utca");
        var uhazszam = document.getElementById("hazszam");
        var uszulido = document.getElementById("szulido");
        var ukedvezmeny = document.getElementById("kedvezmeny");

        var requestToSend = {"task": "createUtas", "email": uemail, "password_1": passid_1, "password_2": passid_2, "vezeteknev": uvezeteknev, "keresztnev": ukeresztnev, "telefon": utelefon, "irsz": uirsz, "varos": uvaros, "utca": uutca, "hazszam": uhazszam, "szulido": uszulido, "kedvezmeny": ukedvezmeny};
                                $.ajax({
                                   url: "/progmod2/vonatjegyapp/UtasController",
                                   type: "POST",
                                   data: requestToSend,
                                   success: function(response){
                                       alert("A regisztráció állapota: "+response.valasz);
                                       window.location.replace("login.html");
                                   },
                                           
                                   error: function(){
                                       alert("Hiba történt! az adatok feltöltése közben!");
                                   }
                                });
    }
    
    </script>
</head>

<body>
    <h2>Regisztráció</h2>

    <div class="container">
        <form method="post" name="registration" onsubmit="formValidation()">
            <div class="input-group">
                <label>Vezetéknév: </label>
                <input type="text" id="vezeteknev" name="vezeteknev" required>
            </div>
            <div class="input-group">
                <label>Keresztnév:</label>
                <input type="text" id="keresztnev" name="keresztnev" required>
            </div>
            <div class="input-group">
                <label>Telefonszám:</label>
                <input type="number" id="telefonszam" name="telefonszam" required>
            </div>
            <div class="input-group">
                <label>Irányítószám:</label>
                <input type="number" id="irsz" name="irsz" required>
            </div>
            <div class="input-group">
                <label>Város:</label>
                <select name="varos" id="varos" required>
                    <option value="">Válasszon ki egy várost!</option>
                    <option value="budapest">Budapest</option>
                    <option value="debrecen">Debrecen</option>
                    <option value="szeged">Szeged</option>
                    <option value="miskolc">Miskolc</option>
                    <option value="pecs">Pécs</option>
                    <option value="gyor">Győr</option>
                    <option value="nyiregyhaza">Nyíregyháza</option>
                </select>
            </div>
            <div class="input-group">
                <label>Utca:</label>
                <input type="text" id="utca" name="utca" required>
            </div>
            <div class="input-group">
                <label>Házszám:</label>
                <input type="text" id="hazszam" name="hazszam" required>
            </div>
            <div class="input-group">
                <label>Születési idő:</label>
                <input type="date" id="szulido" name="szulido" required>
            </div>
            <div class="input-group">
                <label>Kedvezmény:</label>
                <select name="kedvezmeny" id="kedvezmeny" required>
                    <option value="">Válasszon ki egy kedvezményfajtát!</option>
                    <option id="nincs">Nincs Kedvezmény</option>
                    <option id="kozalkalmazott">Közalkalmazott</option>
                    <option id="diak">Diák</option>
                    <option id="kiskoru">Kiskorú(50%)</option>
                    <option id="65_feletti">65 év feletti(100%)</option>
                    <option id="felarva">Félárva(90%)</option>
                    <option id="fogyatek">Fogyatékkal élő személy(90%)</option>

                </select>
            </div>
            <div class="input-group">
                <label>E-mail cím:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <div class="input-group">
                <label>Jelszó:</label>
                <input type="password" id="password_1" name="password_1" required>
            </div>
            <div class="input-group">
                <label>Jelszó megerősítése:</label>
                <input type="password" id="password_2" name="password_2" required>
            </div>
            <div class="input-group">
                <button type="submit" class="btn" id="reg_user">Regisztráció</button>
            </div>

        </form>
        
    </div>
</body>

<footer>
    <style>

     
 
        body{
            color: #ec8f22;
        }
        label, input{
            border-radius: 15px;
         
        }
        input{
            background-color: #a7a7a7;
         
        }
        .kedvezmeny, .kozjelleg{
            border-radius: 12px;
            background-color: #a7a7a7;
        }
    
        .Bevitel{
            margin: 15px;
            margin-left: 250px;
            background-color: #EC8F22;
    
        }
        .ToPrefBtn {
      border: none;
      color: #1A1925;
      padding: 12px 24px;
      border-radius: 8px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      background-color:#EC8F22;
    
    
    } 
    </style>
</footer>

</html>